# âœ… Debug-Gymè¿ç§»åˆ°rLLM - æœ€ç»ˆäº¤ä»˜æ–‡æ¡£

## ğŸ¯ ä»»åŠ¡å®Œæˆ

å·²æˆåŠŸå°†**debug-gymçš„SWE-bench agent scaffold**å®Œæ•´è¿ç§»åˆ°**rLLM**ï¼Œå¹¶å®ç°**ç”Ÿäº§çº§Kubernetesæ”¯æŒ**ï¼

---

## ğŸ“¦ å®Œæ•´äº¤ä»˜æ¸…å•

### æ ¸å¿ƒä»£ç  (6ä¸ªæ–‡ä»¶)

| æ–‡ä»¶ | è¡Œæ•° | åŠŸèƒ½ | å…³é”®ç‰¹æ€§ |
|------|------|------|---------|
| `rllm/agents/debug_gym_agent.py` | 251 | Agenté€‚é…å™¨ | è§£æå·¥å…·è°ƒç”¨ï¼Œè½¨è¿¹æ”¶é›† |
| `rllm/environments/debug_gym/debug_gym_env.py` | 444 | é€šç”¨ç¯å¢ƒ | æ”¯æŒlocal/docker/k8s |
| `rllm/environments/debug_gym/swe_bench_env.py` | 520+ | **SWE-benchç¯å¢ƒ** | K8sä¼˜åŒ–ï¼Œè·³è¿‡é•œåƒé¢„æ‹‰å– |
| `rllm/environments/debug_gym/k8s_terminal.py` | 700+ | **K8s Terminal** | watchç›‘æ§ï¼Œç”Ÿäº§çº§å®ç° |
| `rllm/rewards/debug_gym_reward.py` | 252 | å¥–åŠ±å‡½æ•° | å¤šå› ç´ å¥–åŠ±è®¡ç®— |
| `rllm/agents/system_prompts.py` | +45 | ç³»ç»Ÿæç¤º | Debug-gymä¸“ç”¨æç¤º |

### é…ç½®æ–‡ä»¶ (3ä¸ª)

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `rllm/trainer/config/debug_gym_trainer.yaml` | é€šç”¨è°ƒè¯•ä»»åŠ¡ |
| `rllm/trainer/config/swe_bench_debug_gym_trainer.yaml` | **SWE-benchè®­ç»ƒ** |
| `examples/debug_gym/kubernetes_example.yaml` | K8sé…ç½®ç¤ºä¾‹ |

### è®­ç»ƒè„šæœ¬ (6ä¸ª)

| è„šæœ¬ | ç”¨é€” | åç«¯æ”¯æŒ |
|------|------|---------|
| `train_debug_gym.py` | é€šç”¨è®­ç»ƒ | local/docker/k8s |
| `train_swe_bench.py` | **SWE-benchè®­ç»ƒ** | docker/k8s |
| `train_debug_gym.sh` | Bashå¯åŠ¨å™¨ | local/docker |
| `train_swe_bench.sh` | SWE-bench Bash | docker |
| `train_swe_bench_k8s.sh` | **SWE-bench K8s** | kubernetes |
| `test_k8s_swe_bench.py` | K8såŠŸèƒ½æµ‹è¯• | kubernetes |

### æ–‡æ¡£ (15ä¸ª)

| æ–‡æ¡£ | å†…å®¹ | ç›®æ ‡è¯»è€… |
|------|------|---------|
| `START_HERE.md` | å¼€å§‹æŒ‡å— | æ‰€æœ‰äºº â­ |
| `QUICK_START.md` | 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹ | åˆå­¦è€… |
| `RUN_K8S.md` | K8så¿«é€Ÿè¿è¡Œ | K8sç”¨æˆ· |
| `README.md` | å®Œæ•´æŒ‡å—(EN) | è‹±æ–‡ç”¨æˆ· |
| `README_CN.md` | å®Œæ•´æŒ‡å—(ä¸­æ–‡) | ä¸­æ–‡ç”¨æˆ· |
| `K8S_SETUP.md` | K8sè¯¦ç»†è®¾ç½® | è¿ç»´äººå‘˜ |
| `SWE_BENCH_K8S_GUIDE.md` | **SWE-bench K8sæŒ‡å—** | ç”Ÿäº§éƒ¨ç½² |
| `K8S_FIX_EXPLAINED.md` | K8sæŠ€æœ¯å®ç° | å¼€å‘è€… |
| `K8S_IMPLEMENTATION_DETAILS.md` | **å®ç°ç»†èŠ‚å¯¹æ¯”** | æ¶æ„å¸ˆ |
| `ARCHITECTURE_COMPARISON.md` | Debug-Gym vs rLLM | ç ”ç©¶è€… |
| `ROLLOUT_EXPLAINED.md` | AgentExecutionEngineåŸç† | å¼€å‘è€… |
| `POD_CREATION_EXPLAINED.md` | **Podåˆ›å»ºæµç¨‹è¯¦è§£** | å¼€å‘è€… |
| `TROUBLESHOOTING.md` | æ•…éšœæ’é™¤ | æ‰€æœ‰äºº |
| `FINAL_SUMMARY.md` | é›†æˆæ€»ç»“ | æ‰€æœ‰äºº |
| `INTEGRATION_SUMMARY.md` | è¿ç§»æ€»ç»“ | é¡¹ç›®ç»ç† |

---

## ğŸ”‘ å…³é”®æŠ€æœ¯çªç ´

### 1. ç”Ÿäº§çº§Kuberneteså®ç°

å‚è€ƒr2egymçš„`DockerRuntime`å®ç°äº†ï¼š

#### Podåˆ›å»º
```python
âœ… Watchç›‘æ§ï¼ˆæ¨é€æ¨¡å¼ï¼Œä¸æ˜¯è½®è¯¢ï¼‰
âœ… é‡è¯•æœºåˆ¶ï¼ˆå¤„ç†APIé™æµï¼‰
âœ… æŒ‡æ•°é€€é¿ï¼ˆ5s â†’ 10s â†’ 20s â†’ 40s â†’ 60sï¼‰
âœ… è¯¦ç»†æ—¥å¿—
```

#### å‘½ä»¤æ‰§è¡Œ
```python
âœ… çº¿ç¨‹æ± éš”ç¦»
âœ… è¶…æ—¶ä¿æŠ¤ï¼ˆtimeout + 5s bufferï¼‰
âœ… ä¿æŒstdout/stderräº¤é”™é¡ºåº
âœ… å®Œæ•´çš„é”™è¯¯ç å¤„ç†
```

#### æ–‡ä»¶å¤åˆ¶
```python
âœ… Tar over execï¼ˆæµå¼ä¼ è¾“ï¼‰
âœ… é‡è¯•æœºåˆ¶
âœ… æ”¯æŒæ–‡ä»¶å’Œç›®å½•
```

#### Podæ¸…ç†
```python
âœ… Watchç›‘æ§åˆ é™¤è¿‡ç¨‹
âœ… å¤„ç†404ï¼ˆå·²åˆ é™¤ï¼‰
âœ… å¼ºåˆ¶åˆ é™¤å¡ä½çš„Pod
```

### 2. æ™ºèƒ½é•œåƒç®¡ç†

```python
# Dockeråç«¯ï¼šé¢„æ‹‰å–æ‰€æœ‰é•œåƒ
load_dataset():
    for img in 500_images:
        docker.pull(img)  # åœ¨hostä¸Š

# K8såç«¯ï¼šè·³è¿‡é¢„æ‹‰å–ï¼Œè®©K8sè‡ªåŠ¨å¤„ç†
load_dataset():
    # è·³è¿‡Dockeræ‹‰å–
    # K8sä¼šåœ¨åˆ›å»ºPodæ—¶è‡ªåŠ¨æ‹‰å–åˆ°èŠ‚ç‚¹
```

**ä¼˜åŠ¿**ï¼š
- âœ… èŠ‚çœæ—¶é—´ï¼šä¸éœ€è¦åœ¨hostä¸Šä¸‹è½½
- âœ… èŠ‚çœç©ºé—´ï¼šé•œåƒåœ¨K8sèŠ‚ç‚¹ä¸Š
- âœ… å¹¶è¡Œæ‹‰å–ï¼šå¤šä¸ªèŠ‚ç‚¹å¯ä»¥åŒæ—¶æ‹‰å–
- âœ… è‡ªåŠ¨ç¼“å­˜ï¼šèŠ‚ç‚¹é‡ç”¨å·²æ‹‰å–çš„é•œåƒ

### 3. å»¶è¿Ÿåˆå§‹åŒ–æœºåˆ¶

```python
# å…è®¸SWE-benchåŠ¨æ€è®¾ç½®é•œåƒ
KubernetesTerminal.__init__():
    self.image = "python:3.12"
    self._pod = None  # ä¸åˆ›å»ºPod

setup_task():
    terminal.base_image = "swebench/sweb.eval.x86_64.django..."
    # âœ… Podè¿˜æ²¡åˆ›å»ºï¼Œå¯ä»¥ä¿®æ”¹é•œåƒ

setup_terminal():
    terminal.run("apt update...")
    # â† ç¬¬ä¸€æ¬¡run()è§¦å‘Podåˆ›å»º
    # âœ… ä½¿ç”¨æ­£ç¡®çš„swebenché•œåƒï¼
```

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿæµ‹è¯•

```bash
# 1. æµ‹è¯•K8sè¿æ¥
kubectl cluster-info

# 2. è¿è¡Œæµ‹è¯•ï¼ˆéªŒè¯æ‰€æœ‰åŠŸèƒ½ï¼‰
python examples/debug_gym/test_k8s_swe_bench.py

# é¢„æœŸç»“æœï¼š
# âœ“ åªåˆ›å»ºä¸€ä¸ªPod
# âœ“ ä¸ä¼šä¸‹è½½Dockeré•œåƒåˆ°host
# âœ“ æ‰€æœ‰æ¥å£æµ‹è¯•é€šè¿‡
```

### ç”Ÿäº§è®­ç»ƒ

```bash
# åˆ›å»ºå‘½åç©ºé—´
kubectl create namespace debug-gym-swe

# è¿è¡Œè®­ç»ƒ
bash examples/debug_gym/train_swe_bench_k8s.sh

# ç›‘æ§
kubectl get pods -n debug-gym-swe -w
```

---

## ğŸ“Š æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                rLLMè®­ç»ƒæ¡†æ¶                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      AgentExecutionEngine                        â”‚ â”‚
â”‚  â”‚      (ä½¿ç”¨ä½ çš„ç¯å¢ƒè¿›è¡Œrollout)                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  SWEBenchDebugGymEnv                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ backend="kubernetes"                     â”‚   â”‚
â”‚  â”‚  â””â”€ è·³è¿‡Dockeré•œåƒé¢„æ‹‰å– â­                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  KubernetesTerminal                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ ç»§æ‰¿DockerTerminalï¼ˆç±»å‹å…¼å®¹ï¼‰            â”‚   â”‚
â”‚  â”‚  â”œâ”€ Watchç›‘æ§PodçŠ¶æ€ â­                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ é‡è¯•æœºåˆ¶ â­                              â”‚   â”‚
â”‚  â”‚  â”œâ”€ çº¿ç¨‹æ± æ‰§è¡Œ â­                            â”‚   â”‚
â”‚  â”‚  â””â”€ Tar over exec â­                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  debug_gym.SWEBenchEnv                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ Tools (pdb, eval, grep, rewrite)        â”‚   â”‚
â”‚  â”‚  â””â”€ è°ƒè¯•é€»è¾‘                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Kubernetes Pod                              â”‚   â”‚
â”‚  â”‚  â””â”€ SWE-bench Dockeré•œåƒ                     â”‚   â”‚
â”‚  â”‚      (swebench/sweb.eval.x86_64.django...)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ æ ¸å¿ƒåˆ›æ–°

1. **é¦–ä¸ªK8sæ”¯æŒçš„debug-gymç¯å¢ƒ** ğŸ”¥
2. **æ™ºèƒ½é•œåƒç®¡ç†**ï¼ˆK8sè‡ªåŠ¨æ‹‰å–ï¼‰ğŸ”¥
3. **ç”Ÿäº§çº§å®ç°**ï¼ˆå‚è€ƒr2egymï¼‰ğŸ”¥
4. **å®Œæ•´çš„æ–‡æ¡£ä½“ç³»**ï¼ˆ15ä¸ªæ–‡æ¡£ï¼‰ğŸ”¥
5. **ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆ**ï¼ˆä»å¼€å‘åˆ°ç”Ÿäº§ï¼‰ğŸ”¥

---

## ğŸ“ˆ å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | åŸdebug-gym | è¿ç§»å |
|------|-----------|--------|
| RLè®­ç»ƒ | âŒ | âœ… PPO/GRPO |
| Kubernetes | âŒ | âœ… ç”Ÿäº§çº§å®ç° |
| å¤§è§„æ¨¡å¹¶è¡Œ | âŒ | âœ… 32+ç¯å¢ƒ |
| å¥–åŠ±å‡½æ•° | âŒ | âœ… æ™ºèƒ½è®¡ç®— |
| è½¨è¿¹é‡‡é›† | âŒ | âœ… AgentExecutionEngine |
| å·¥å…·ç”Ÿæ€ | âœ… pdbç­‰ | âœ… ä¿ç•™æ‰€æœ‰ |

---

## ğŸ‰ ç«‹å³å¼€å§‹

### ä¸€é”®å¯åŠ¨

```bash
# ç¡®ä¿K8så¯ç”¨
kubectl cluster-info

# è¿è¡Œæµ‹è¯•
python examples/debug_gym/test_k8s_swe_bench.py

# å¼€å§‹è®­ç»ƒ
bash examples/debug_gym/train_swe_bench_k8s.sh
```

### æ–‡æ¡£å…¥å£

| æˆ‘è¦... | çœ‹è¿™ä¸ª |
|---------|--------|
| å¿«é€Ÿå¼€å§‹ | [START_HERE.md](examples/debug_gym/START_HERE.md) |
| è¿è¡ŒK8s | [RUN_K8S.md](examples/debug_gym/RUN_K8S.md) |
| ç†è§£åŸç† | [POD_CREATION_EXPLAINED.md](examples/debug_gym/POD_CREATION_EXPLAINED.md) |
| ç”Ÿäº§éƒ¨ç½² | [SWE_BENCH_K8S_GUIDE.md](examples/debug_gym/SWE_BENCH_K8S_GUIDE.md) |
| æ•…éšœæ’é™¤ | [TROUBLESHOOTING.md](examples/debug_gym/TROUBLESHOOTING.md) |

---

## ğŸ† æˆå°±è§£é”

- [x] Debug-Gymå®Œæ•´è¿ç§»
- [x] rLLMæ¥å£é€‚é…
- [x] SWE-benchç¯å¢ƒæ”¯æŒ
- [x] Kuberneteså®Œæ•´å®ç°
- [x] å‚è€ƒr2egymæœ€ä½³å®è·µ
- [x] æ™ºèƒ½é•œåƒç®¡ç†
- [x] ç”Ÿäº§çº§é”™è¯¯å¤„ç†
- [x] å®Œæ•´æ–‡æ¡£ä½“ç³»
- [x] åŠŸèƒ½æµ‹è¯•éªŒè¯
- [x] è®­ç»ƒè„šæœ¬ready

**æ‰€æœ‰å·¥ä½œå·²å®Œæˆï¼å¯ä»¥ç›´æ¥æŠ•å…¥ä½¿ç”¨ï¼** ğŸš€âœ¨

---

## ğŸ“ æ”¯æŒ

- **æ–‡æ¡£ç´¢å¼•**: `examples/debug_gym/`ç›®å½•ä¸‹15ä¸ªMarkdownæ–‡ä»¶
- **æµ‹è¯•**: `python examples/debug_gym/test_k8s_swe_bench.py`
- **è®­ç»ƒ**: `bash examples/debug_gym/train_swe_bench_k8s.sh`

Happy Training with Kubernetes! â˜¸ï¸ğŸ‰

